import{a as e,j as s}from"./react-core-DPHBRSZI.js";import{T as t}from"./SkeletonLoader--gW7sJuH.js";import{a as r,A as a}from"./index-yWi9ERo7.js";import"./react-dom-CzVnfz0w.js";import"./vendor-CNpwfz3n.js";import"./react-router-CQqd29q0.js";const o=a.API_WORKERS,i={workername:"",ip:"",is_active:1},l=({status:e,onClose:t})=>e&&s.jsxs("div",{className:`\n        fixed top-6 left-1/2 transform -translate-x-1/2 z-50\n        px-6 py-3 rounded-xl shadow text-base font-semibold\n        flex items-center gap-3\n        transition-all duration-300\n        backdrop-blur-md\n        ${"error"===e.type?"bg-red-200/60 border border-red-400 text-red-800":"bg-green-200/60 border border-green-400 text-green-800"}\n      `,style:{minWidth:250,maxWidth:400,boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.23)",background:"error"===e.type?"rgba(255, 0, 0, 0.29)":"rgba(0, 200, 83, 0.29)",borderRadius:"16px",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},role:"alert",children:[s.jsx("i",{className:"fas text-lg "+("error"===e.type?"fa-exclamation-circle text-red-500":"fa-check-circle text-green-500")}),s.jsx("span",{className:"flex-1",children:e.message}),s.jsx("button",{onClick:t,className:"ml-2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Close",children:s.jsx("i",{className:"fas fa-times"})})]});function n(e){return/^(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)){3}$/.test(e)||/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/.test(e)}const d=()=>{const[a,d]=e.useState([]),[c,m]=e.useState(!0),[x,u]=e.useState(!1),[f,p]=e.useState(!1),[b,h]=e.useState(i),[g,y]=e.useState(null),[j,w]=e.useState(null),v=async()=>{m(!0);try{const e=await r(o),s=await e.json();Array.isArray(s)?d(s):Array.isArray(s.data)?d(s.data):d([])}catch{w({type:"error",message:"Failed to load workers."}),d([])}m(!1)};e.useEffect(()=>{v()},[]);const N=e=>{const{name:s,value:t}=e.target;h(e=>({...e,[s]:t}))};return e.useEffect(()=>{if(j){const e=setTimeout(()=>w(null),3e3);return()=>clearTimeout(e)}},[j]),s.jsxs("main",{className:"max-w-7xl mx-auto px-4 mt-14 sm:px-6 py-6",children:[s.jsx(l,{status:j,onClose:()=>w(null)}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx("i",{className:"fas fa-users mr-3 text-blue-600"}),"Workers"]}),s.jsxs("button",{onClick:()=>{h(i),u(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx("i",{className:"fas fa-plus mr-2"})," Add Worker"]})]}),s.jsx("div",{className:"card overflow-hidden bg-white rounded-xl shadow",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Worker Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c?s.jsx(t,{rows:5,columns:5}):0===a.length?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("i",{className:"fas fa-users text-6xl text-gray-300 mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No workers found. Add one to get started."})]})})}):a.map(e=>s.jsxs("tr",{className:0===e.is_active?"bg-gray-50":"",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.id}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.workername})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.ip}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("button",{onClick:()=>(async e=>{const s=1===e.is_active?0:1,t=1===s?"activate":"deactivate";if(window.confirm(`Are you sure you want to ${t} worker "${e.workername}"?`))try{const a=await r(o,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,is_active:s})}),i=await a.json();a.ok||i.success?(w({type:"success",message:i.message||`Worker ${t}d successfully!`}),v()):w({type:"error",message:i.error||i.message||`Failed to ${t} worker.`})}catch{w({type:"error",message:`Failed to ${t} worker.`})}})(e),className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors "+(1===e.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"),title:1===e.is_active?"Click to deactivate":"Click to activate",children:[s.jsx("i",{className:`fas ${1===e.is_active?"fa-check-circle":"fa-times-circle"} mr-1`}),1===e.is_active?"Active":"Inactive"]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{onClick:()=>(e=>{y(e.id),h({workername:e.workername,ip:e.ip,is_active:e.is_active}),p(!0)})(e),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Edit",children:s.jsx("i",{className:"fas fa-edit mr-1"})}),s.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this worker?"))try{const s=await r(o,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),t=await s.json();s.ok||t.success?(w({type:"success",message:t.message||"Worker deleted successfully!"}),v()):w({type:"error",message:t.error||t.message||"Failed to delete worker."})}catch{w({type:"error",message:"Failed to delete worker."})}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx("i",{className:"fas fa-trash mr-1"})})]})]},e.id))})]})})}),x&&s.jsxs("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-md backdrop-saturate-150 border border-white/20 shadow-xl overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:[s.jsx(l,{status:j,onClose:()=>w(null)}),s.jsxs("div",{className:"relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[s.jsx("i",{className:"fas fa-plus-circle mr-2 text-blue-600"}),"Add New Worker"]}),s.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-500",children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("form",{className:"space-y-4",onSubmit:async e=>{if(e.preventDefault(),n(b.ip))try{const e=await r(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),s=await e.json();e.ok||s.success?(w({type:"success",message:s.message||"Worker added successfully!"}),u(!1),h(i),v()):w({type:"error",message:s.error||s.message||"Failed to add worker."})}catch{w({type:"error",message:"Failed to add worker."})}else w({type:"error",message:"Invalid IP address format."})},children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Worker Name"}),s.jsx("input",{type:"text",name:"workername",required:!0,maxLength:50,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter worker name",value:b.workername,onChange:N})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address"}),s.jsx("input",{type:"text",name:"ip",required:!0,maxLength:39,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter IP address",value:b.ip,onChange:N})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{name:"is_active",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:void 0!==b.is_active?b.is_active:1,onChange:N,children:[s.jsx("option",{value:1,children:"Active"}),s.jsx("option",{value:0,children:"Inactive"})]})]}),s.jsxs("div",{className:"flex justify-end pt-4 space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>u(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx("i",{className:"fas fa-save mr-2"})," Save Worker"]})]})]})]})]}),f&&s.jsxs("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-md backdrop-saturate-150 border border-white/20 shadow-xl overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:[s.jsx(l,{status:j,onClose:()=>w(null)}),s.jsxs("div",{className:"relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[s.jsx("i",{className:"fas fa-edit mr-2 text-blue-600"}),"Edit Worker"]}),s.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-500",children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("form",{className:"space-y-4",onSubmit:async e=>{if(e.preventDefault(),n(b.ip))try{const e=await r(o,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g,...b})}),s=await e.json();e.ok||s.success?(w({type:"success",message:s.message||"Worker updated successfully!"}),p(!1),h(i),y(null),v()):w({type:"error",message:s.error||s.message||"Failed to update worker."})}catch{w({type:"error",message:"Failed to update worker."})}else w({type:"error",message:"Invalid IP address format."})},children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Worker Name"}),s.jsx("input",{type:"text",name:"workername",required:!0,maxLength:50,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter worker name",value:b.workername,onChange:N})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address"}),s.jsx("input",{type:"text",name:"ip",required:!0,maxLength:39,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter IP address",value:b.ip,onChange:N})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{name:"is_active",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:void 0!==b.is_active?b.is_active:1,onChange:N,children:[s.jsx("option",{value:1,children:"Active"}),s.jsx("option",{value:0,children:"Inactive"})]})]}),s.jsxs("div",{className:"flex justify-end pt-4 space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>p(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx("i",{className:"fas fa-save mr-2"})," Update Worker"]})]})]})]})]})]})};export{d as default};
