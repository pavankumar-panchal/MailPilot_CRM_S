# Enable rewrite engine
RewriteEngine On

# Allow direct access to api, public, routes, storage, and app directories
RewriteCond %{REQUEST_URI} ^/(api|public|routes|storage|app)/
RewriteRule ^ - [L]

# Block direct access to includes, config, scripts, logs, tmp, and vendor
RewriteCond %{REQUEST_URI} ^/(includes|config|scripts|logs|tmp|vendor|docs)/
RewriteRule ^ - [F,L]

# Route only /routes/ requests to routes/api.php (not /api/ directory)
RewriteCond %{REQUEST_URI} !-f
RewriteCond %{REQUEST_URI} !-d
RewriteCond %{REQUEST_URI} ^/routes/
RewriteRule ^(.*)$ routes/api.php/$1 [L,QSA]
