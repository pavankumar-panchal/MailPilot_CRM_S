RewriteEngine On

# Route OPTIONS preflight to PHP router so CORS headers are set in code
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ api.php [L]

# Route all requests through api.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ api.php/$1 [L,QSA]
