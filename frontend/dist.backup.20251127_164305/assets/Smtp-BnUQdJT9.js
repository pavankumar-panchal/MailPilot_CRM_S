import{a as e,j as s,R as t}from"./react-core-Bz_OFM-J.js";import{A as a}from"./index-2wpkHUii.js";import"./editor-t5Pr0pkD.js";import"./react-dom-oZ-VTmTY.js";import"./vendor-ZyZh7GQr.js";import"./react-router-Cm8bNIlG.js";const i=a.API_MASTER_SMTPS,r={name:"",host:"",port:465,encryption:"ssl",is_active:!0,received_email:"",accounts:[{email:"",password:"",daily_limit:500,hourly_limit:50,is_active:!0}]},l=({status:e,onClose:t})=>e&&s.jsxs("div",{className:`\n        fixed top-6 left-1/2 transform -translate-x-1/2 z-50\n        px-6 py-3 rounded-xl shadow text-base font-semibold\n        flex items-center gap-3\n        transition-all duration-300\n        backdrop-blur-md\n        ${"error"===e.type?"bg-red-200/60 border border-red-400 text-red-800":"bg-green-200/60 border border-green-400 text-green-800"}\n      `,style:{minWidth:250,maxWidth:400,boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.23)",background:"error"===e.type?"rgba(255, 0, 0, 0.29)":"rgba(0, 200, 83, 0.29)",borderRadius:"16px",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},role:"alert",children:[s.jsx("i",{className:"fas text-lg "+("error"===e.type?"fa-exclamation-circle text-red-500":"fa-check-circle text-green-500")}),s.jsx("span",{className:"flex-1",children:e.message}),s.jsx("button",{onClick:t,className:"ml-2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Close",children:s.jsx("i",{className:"fas fa-times"})})]}),d=()=>{const[a,d]=e.useState([]),[n,c]=e.useState(!0),[o,m]=e.useState(!1),[x,u]=e.useState(!1),[h,g]=e.useState(r),[p,b]=e.useState(null),[y,f]=e.useState(null),[j,v]=e.useState(null),[N,w]=e.useState({email:"",password:"",daily_limit:500,hourly_limit:50,is_active:!0}),[k,_]=e.useState(!1),[C,S]=e.useState(null),[A,E]=e.useState({email:"",password:"",daily_limit:500,hourly_limit:50,is_active:!0}),T=async()=>{c(!0);try{const e=await fetch(i),s=await e.json();Array.isArray(s.data)?d(s.data):Array.isArray(s)?d(s):d([])}catch{f({type:"error",message:"Failed to load SMTP servers."}),d([])}c(!1)};e.useEffect(()=>{T()},[]);const P=e=>{const{name:s,value:t,type:a,checked:i}=e.target;g(e=>({...e,[s]:"checkbox"===a?i:t}))},q=e=>{const{name:s,value:t,type:a,checked:i}=e.target;w(e=>({...e,[s]:"checkbox"===a?i:t}))},F=e=>{const{name:s,value:t,type:a,checked:i}=e.target;E(e=>({...e,[s]:"checkbox"===a?i:t}))};e.useEffect(()=>{if(y){const e=setTimeout(()=>f(null),3e3);return()=>clearTimeout(e)}},[y]);const L=(e,s,t)=>{g(a=>{const i=[...a.accounts];return i[e]={...i[e],[s]:t},{...a,accounts:i}})},$=e=>{g(s=>({...s,accounts:s.accounts.filter((s,t)=>t!==e)}))},D=(e=[])=>{if(!e.length)return"—";const t=e.map(e=>Number(e.hourly_limit)||0).reduce((e,s)=>e+s,0),a=e.map(e=>Number(e.daily_limit)||0).reduce((e,s)=>e+s,0);return s.jsxs("span",{children:[s.jsx("span",{className:"font-medium text-indigo-700",children:t}),s.jsx("span",{className:"text-xs text-gray-400",children:"/hr"})," | ",s.jsx("span",{className:"font-medium text-indigo-700",children:a}),s.jsx("span",{className:"text-xs text-gray-400",children:"/day"})]})};return s.jsxs("main",{className:"max-w-7xl mx-auto px-4 mt-14 sm:px-6 py-6",children:[s.jsx(l,{status:y,onClose:()=>f(null)}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx("i",{className:"fas fa-server mr-3 text-indigo-600"}),"SMTP Records"]}),s.jsxs("button",{onClick:()=>{g(r),m(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("i",{className:"fas fa-plus mr-2"})," Add SMTP Server"]})]}),s.jsx("div",{className:"card overflow-hidden bg-white/80 backdrop-blur-md rounded-xl shadow-lg",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Server"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Accounts"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Total Limits"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-200",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-gray-500",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})})}):0===a.length?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-gray-500",children:"No SMTP servers found. Add one to get started."})}):a.map(e=>s.jsxs(t.Fragment,{children:[s.jsxs("tr",{className:"hover:bg-indigo-50/30 transition",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-base font-semibold text-gray-900",children:e.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[e.host,":",e.port," (",e.encryption?.toUpperCase()||"None",")"]}),e.received_email&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Reply-To: ",s.jsx("span",{className:"font-medium text-gray-700",children:e.received_email})]})]})})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[e.accounts?.length||0," account(s)"]}),s.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:e.accounts?.map(e=>e.email).join(", ")||"No accounts"})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.is_active?`Active (${e.accounts?.filter(e=>e.is_active).length||0})`:"Inactive"})}),s.jsx("td",{className:"px-6 py-4 text-base text-gray-700",children:D(e.accounts)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{return s=e.id,void v(j===s?null:s);var s},className:"text-indigo-600 hover:text-indigo-900",title:"View accounts",children:s.jsx("i",{className:"fas "+(j===e.id?"fa-eye-slash":"fa-eye")})}),s.jsx("button",{onClick:()=>(e=>{b(e.id),g({...e,is_active:!!e.is_active,accounts:e.accounts||[]}),u(!0)})(e),className:"text-indigo-600 hover:text-indigo-900",title:"Edit server",children:s.jsx("i",{className:"fas fa-edit"})}),s.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this SMTP server?"))try{const s=await fetch(`${i}?id=${e}`,{method:"DELETE"}),t=await s.json();t.success?(f({type:"success",message:"SMTP server deleted successfully!"}),T()):f({type:"error",message:t.message||"Failed to delete server."})}catch{f({type:"error",message:"Failed to delete server."})}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete server",children:s.jsx("i",{className:"fas fa-trash"})})]})})]}),j===e.id&&s.jsx("tr",{className:"bg-indigo-50/40",children:s.jsxs("td",{colSpan:5,className:"px-6 py-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-indigo-700 mb-2 flex items-center",children:[s.jsx("i",{className:"fas fa-users mr-2"})," Email Accounts"]}),s.jsx("div",{className:"space-y-2",children:e.accounts?.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.accounts.map(t=>s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between bg-white border rounded-lg shadow-sm p-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-800 flex items-center",children:[s.jsx("i",{className:"fas fa-envelope mr-2 text-indigo-500"}),t.email,t.is_active?s.jsx("span",{className:"ml-3 px-2 py-0.5 rounded bg-green-100 text-green-700 text-xs font-medium",children:"Active"}):s.jsx("span",{className:"ml-3 px-2 py-0.5 rounded bg-red-100 text-red-700 text-xs font-medium",children:"Inactive"})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Hourly:"," ",s.jsx("span",{className:"font-medium",children:t.hourly_limit})," "," |  Daily:"," ",s.jsx("span",{className:"font-medium",children:t.daily_limit})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>((e,s)=>{S({serverId:e,accountId:s.id}),E({email:s.email,password:"",daily_limit:s.daily_limit,hourly_limit:s.hourly_limit,is_active:s.is_active}),_(!0)})(e.id,t),className:"mt-2 md:mt-0 text-indigo-600 hover:text-indigo-800 text-sm flex items-center",title:"Edit account",children:[s.jsx("i",{className:"fas fa-edit mr-1"})," Edit"]}),s.jsxs("button",{onClick:()=>(async(e,s)=>{if(window.confirm("Are you sure you want to delete this email account?"))try{const t=await fetch(`${i}/${e}/accounts/${s}`,{method:"DELETE"}),a=await t.json();a.success?(f({type:"success",message:"Email account deleted successfully!"}),T()):f({type:"error",message:a.message||"Failed to delete email account."})}catch{f({type:"error",message:"Failed to delete email account."})}})(e.id,t.id),className:"mt-2 md:mt-0 text-red-500 hover:text-red-700 text-sm flex items-center",title:"Delete account",children:[s.jsx("i",{className:"fas fa-trash-alt mr-1"})," Delete"]})]})]},t.id))}):s.jsx("div",{className:"text-sm text-gray-500",children:"No accounts configured"})})]}),s.jsxs("div",{className:"border-t pt-4 mt-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-indigo-700 mb-2 flex items-center",children:[s.jsx("i",{className:"fas fa-plus mr-2"})," Add New Account"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:N.email,onChange:q,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"user@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",name:"password",value:N.password,onChange:q,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Password"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Hourly Limit"}),s.jsx("input",{type:"number",name:"hourly_limit",value:N.hourly_limit,onChange:q,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Daily Limit"}),s.jsx("input",{type:"number",name:"daily_limit",value:N.daily_limit,onChange:q,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{onClick:()=>(async e=>{if(N.email&&N.password)try{const s=await fetch(`${i}/${e}/accounts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),t=await s.json();t.success?(f({type:"success",message:"Email account added successfully!"}),w({email:"",password:"",daily_limit:500,hourly_limit:50,is_active:!0}),T()):f({type:"error",message:t.message||"Failed to add email account."})}catch{f({type:"error",message:"Failed to add email account."})}else f({type:"error",message:"Email and password are required."})})(e.id),disabled:!N.email||!N.password,className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white ${N.email&&N.password?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-300 cursor-not-allowed"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:[s.jsx("i",{className:"fas fa-plus mr-1"})," Add"]})})]})]})]})})]},e.id))})]})})}),o&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-md",children:s.jsxs("div",{className:"relative w-full max-w-2xl mx-auto bg-white rounded-lg shadow-lg flex flex-col",style:{maxHeight:"90vh"},children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-white border-b flex justify-between items-center px-5 py-3 rounded-t-lg",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx("i",{className:"fas fa-plus-circle mr-2 text-indigo-600"}),"Add New SMTP Server"]}),s.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-500",children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("form",{className:"overflow-y-auto px-5 py-4",style:{maxHeight:"75vh"},onSubmit:async e=>{e.preventDefault();const s=h.accounts.filter(e=>e.email&&e.password);if(0!==s.length)try{const e=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,accounts:s})}),t=await e.json();t.success?(f({type:"success",message:"SMTP server added successfully!"}),m(!1),g(r),T()):f({type:"error",message:t.message||"Failed to add server."})}catch{f({type:"error",message:"Failed to add server."})}else f({type:"error",message:"At least one valid account is required."})},children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"text-md font-semibold text-indigo-700 mb-3 flex items-center",children:[s.jsx("i",{className:"fas fa-server mr-2"})," Server Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),s.jsx("input",{type:"text",name:"name",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",placeholder:"SMTP1",value:h.name,onChange:P})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),s.jsx("input",{type:"text",name:"host",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",placeholder:"smtp.example.com",value:h.host,onChange:P})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),s.jsx("input",{type:"number",name:"port",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",placeholder:"465",value:h.port,onChange:P})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Encryption"}),s.jsxs("select",{name:"encryption",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:h.encryption,onChange:P,children:[s.jsx("option",{value:"ssl",children:"SSL"}),s.jsx("option",{value:"tls",children:"TLS"}),s.jsx("option",{value:"",children:"None"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received Email"}),s.jsx("input",{type:"email",name:"received_email",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",placeholder:"inbox@example.com",value:h.received_email,onChange:P})]}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx("input",{type:"checkbox",name:"is_active",id:"add_is_active",checked:h.is_active,onChange:P,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"add_is_active",className:"ml-2 block text-sm text-gray-700",children:"Active"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-md font-semibold text-indigo-700 mb-3 flex items-center",children:[s.jsx("i",{className:"fas fa-users mr-2"})," Email Accounts"]}),h.accounts.map((e,t)=>s.jsxs("div",{className:"border rounded p-3 mb-2 bg-gray-50 relative",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",name:"email",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",placeholder:"user@example.com",value:e.email,onChange:e=>L(t,"email",e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",name:"password",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:e.password,onChange:e=>L(t,"password",e.target.value)})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:e.is_active,onChange:e=>L(t,"is_active",e.target.checked),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 block text-sm text-gray-700",children:"Active"})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hourly Limit"}),s.jsx("input",{type:"number",name:"hourly_limit",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:e.hourly_limit,onChange:e=>L(t,"hourly_limit",e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Limit"}),s.jsx("input",{type:"number",name:"daily_limit",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:e.daily_limit,onChange:e=>L(t,"daily_limit",e.target.value)})]})]}),h.accounts.length>1&&s.jsx("button",{type:"button",className:"absolute top-2 right-2 text-red-500 hover:text-red-700 text-xs",onClick:()=>$(t),title:"Remove this account",children:s.jsx("i",{className:"fas fa-times-circle"})})]},t)),s.jsxs("button",{type:"button",className:"mt-2 text-indigo-600 text-xs",onClick:()=>{g(e=>({...e,accounts:[...e.accounts,{email:"",password:"",daily_limit:500,hourly_limit:50,is_active:!0}]}))},children:[s.jsx("i",{className:"fas fa-plus mr-1"})," Add Another Account"]})]}),s.jsxs("div",{className:"flex justify-end pt-6 space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>m(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("i",{className:"fas fa-save mr-2"})," Save Server"]})]})]})]})}),x&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-md",children:s.jsxs("div",{className:"relative w-full max-w-xl mx-auto bg-white rounded-lg shadow-lg flex flex-col",style:{maxHeight:"90vh"},children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-white border-b flex justify-between items-center px-5 py-3 rounded-t-lg",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx("i",{className:"fas fa-edit mr-2 text-indigo-600"}),"Edit SMTP Server"]}),s.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-500",children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("form",{className:"overflow-y-auto px-5 py-4",style:{maxHeight:"75vh"},onSubmit:async e=>{e.preventDefault();try{const e=await fetch(`${i}?id=${p}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({server:{name:h.name,host:h.host,port:h.port,encryption:h.encryption,is_active:h.is_active,received_email:h.received_email},accounts:h.accounts})}),s=await e.json();s.success?(f({type:"success",message:"SMTP server updated successfully!"}),u(!1),g(r),b(null),T()):f({type:"error",message:s.message||"Failed to update server."})}catch{f({type:"error",message:"Failed to update server."})}},children:[s.jsx("input",{type:"hidden",name:"id",value:p}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),s.jsx("input",{type:"text",name:"name",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:h.name,onChange:P})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),s.jsx("input",{type:"text",name:"host",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:h.host,onChange:P})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),s.jsx("input",{type:"number",name:"port",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:h.port,onChange:P})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Encryption"}),s.jsxs("select",{name:"encryption",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:h.encryption,onChange:P,children:[s.jsx("option",{value:"ssl",children:"SSL"}),s.jsx("option",{value:"tls",children:"TLS"}),s.jsx("option",{value:"",children:"None"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received Email"}),s.jsx("input",{type:"email",name:"received_email",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",placeholder:"inbox@example.com",value:h.received_email,onChange:P})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Email Accounts"}),h.accounts.map((e,t)=>s.jsxs("div",{className:"border rounded p-3 mb-2 bg-gray-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",name:"email",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:e.email,onChange:e=>L(t,"email",e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",name:"password",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:e.password,onChange:e=>L(t,"password",e.target.value)})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:e.is_active,onChange:e=>L(t,"is_active",e.target.checked),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 block text-sm text-gray-700",children:"Active"})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hourly Limit"}),s.jsx("input",{type:"number",name:"hourly_limit",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:e.hourly_limit,onChange:e=>L(t,"hourly_limit",e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Limit"}),s.jsx("input",{type:"number",name:"daily_limit",required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",value:e.daily_limit,onChange:e=>L(t,"daily_limit",e.target.value)})]})]}),h.accounts.length>1&&s.jsx("button",{type:"button",className:"mt-2 text-red-600 text-xs",onClick:()=>$(t),children:"Remove Account"})]},t))]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"is_active",id:"edit_is_active",checked:h.is_active,onChange:P,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"edit_is_active",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),s.jsxs("div",{className:"flex justify-end pt-4 space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>u(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("i",{className:"fas fa-save mr-2"})," Update Server"]})]})]})]})}),k&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-md",children:s.jsxs("div",{className:"relative w-full max-w-lg mx-auto bg-white rounded-lg shadow-lg",children:[s.jsxs("div",{className:"bg-white border-b flex justify-between items-center px-5 py-3 rounded-t-lg",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx("i",{className:"fas fa-edit mr-2 text-indigo-600"}),"Edit Email Account"]}),s.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-500",children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("div",{className:"px-5 py-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:A.email,onChange:F,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"user@example.com",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password (leave blank to keep current)"}),s.jsx("input",{type:"password",name:"password",value:A.password,onChange:F,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"New password (optional)"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hourly Limit"}),s.jsx("input",{type:"number",name:"hourly_limit",value:A.hourly_limit,onChange:F,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",min:"0",max:"1000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Limit"}),s.jsx("input",{type:"number",name:"daily_limit",value:A.daily_limit,onChange:F,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",min:"0",max:"10000"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"is_active",id:"edit_account_is_active",checked:A.is_active,onChange:F,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"edit_account_is_active",className:"ml-2 block text-sm text-gray-700",children:"Active"})]})]}),s.jsxs("div",{className:"flex justify-end pt-4 space-x-3 mt-4 border-t",children:[s.jsx("button",{type:"button",onClick:()=>_(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),s.jsxs("button",{type:"button",onClick:async()=>{if(C&&A.email)try{const e=await fetch(`${i}/${C.serverId}/accounts/${C.accountId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)}),s=await e.json();s.success?(f({type:"success",message:"Email account updated successfully!"}),_(!1),S(null),E({email:"",password:"",daily_limit:500,hourly_limit:50,is_active:!0}),T()):f({type:"error",message:s.message||"Failed to update email account."})}catch{f({type:"error",message:"Failed to update email account."})}else f({type:"error",message:"Email is required."})},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("i",{className:"fas fa-save mr-2"})," Update Account"]})]})]})]})})]})};export{d as default};
